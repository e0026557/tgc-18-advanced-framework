{{#extends 'base'}}

{{#block 'content'}}
<h1>Products</h1>
<a href="products/create" class="btn btn-primary">New</a>

<h2>Search</h2>
{{!-- GET since we are just retrieving information --}}
<form method="get">
  {{{form}}}

  <input type="submit" value="Search" class="btn btn-primary my-3">
</form>


<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Cost</th>
      <th>Category</th>
      <th>Tags</th>
      <th>Image</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#each products}}
    <tr>
      <td>{{this.name}}</td>
      <td>{{this.description}}</td>
      <td>{{this.cost}}</td>
      <td>{{this.category.name}}</td>
      <td>
        {{#each this.tags}}
        <span class="badge bg-primary">{{this.name}}</span>
        {{/each}}
      </td>
      <td>
        <img class="img-fluid" src="{{this.image_url}}">
      </td>
      <td>
        <a href="products/{{this.id}}/update" class="btn btn-sm btn-primary">Update</a>
        <a href="products/{{this.id}}/delete" class="btn btn-sm btn-danger">Delete</a>
        <a href="cart/{{this.id}}/add" class="btn btn-success btn-sm">Add to Cart</a>
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>

{{/block}}

{{/extends}}